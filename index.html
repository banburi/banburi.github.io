<!DOCTYPE html>
<html>
<head>
  <style>
    .bar-container {
      display: flex;
      justify-content: center;
      align-items: flex-end;
      height: 80vh;
    }
    .bar {
      display: inline-block;
      width: 5px;
      background-color: #3498db;
      margin: 0 1px;
      vertical-align: bottom;
    }
    .sort-button {
        display: inline-block;
        vertical-align: middle;
        width: 225px;
        height: 30px;
        margin: 10px 0 1px 190px;
        border-radius: 3px;
        border: solid 1px rgba(0, 0, 0, 0.25);
        background-color: #ffffff;
    }   
    .sort-button:hover {
      background-color: #000000;
      color: #fff;
    }
  </style>
</head>
<body>
    <button class="sort-button" onclick="startBubbleSort()">버블 정렬</button>
    <button class="sort-button" onclick="startSelectionSort()">선택 정렬</button>
    <button class="sort-button" onclick="startInsertionSort()">삽일 정렬</button>
    <div class="bar-container" id="bars"></div>
</body>
<script>
  function sleep(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  async function bubbleSort(arr) {
    let n = arr.length;
    let swapped;
    do {
      swapped = false;
      for (let i = 0; i < n - 1; i++) {
        if (arr[i] > arr[i + 1]) {
          let temp = arr[i];
          arr[i] = arr[i + 1];
          arr[i + 1] = temp;
          updateVisualization(arr);
          swapped = true;
          await sleep(100);
        }
      }
    } while (swapped);
  }

  async function selectionSort(arr) {
    let n = arr.length;
    for (let i = 0; i < n - 1; i++) {
      let minIndex = i;
      for (let j = i + 1; j < n; j++) {
        if (arr[j] < arr[minIndex]) {
          minIndex = j;
        }
      }
      if (minIndex !== i) {
        let temp = arr[i];
        arr[i] = arr[minIndex];
        arr[minIndex] = temp;
        updateVisualization(arr);
        await sleep(100);
      }
    }
  }

  async function insertionSort(arr) {
    let n = arr.length;
    for (let i = 1; i < n; i++) {
      let key = arr[i];
      let j = i - 1;
      while (j >= 0 && arr[j] > key) {
        arr[j + 1] = arr[j];
        j--;
      }
      arr[j + 1] = key;
      updateVisualization(arr);
      await sleep(100);
    }
  }

  function updateVisualization(arr) {
    const bars = document.getElementById("bars");
    bars.innerHTML = "";
    for (let value of arr) {
      const bar = document.createElement("div");
      bar.className = "bar";
      bar.style.height = (value * 25 + 5) + "px"; // Adjust the range here
      bars.appendChild(bar);
    }
  }

  async function startBubbleSort() {
    const arr = generateRandomArray(150); // Change the array size here
    await bubbleSort(arr);
  }

  async function startSelectionSort() {
    const arr = generateRandomArray(150); // Change the array size here
    await selectionSort(arr);
  }

  async function startInsertionSort() {
    const arr = generateRandomArray(150); // Change the array size here
    await insertionSort(arr);
  }

  function generateRandomArray(size) {
    const arr = [];
    for (let i = 0; i < size; i++) {
      arr.push(Math.floor(Math.random() * 20) + 1); // Random values between 1 and 20
    }
    return arr;
  }

  window.onload = () => {
    const arr = generateRandomArray(150); // Change the initial array size here
    updateVisualization(arr);
  };
</script>
</html>
